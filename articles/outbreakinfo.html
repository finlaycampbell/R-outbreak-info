<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to outbreakinfo • outbreakinfo</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to outbreakinfo">
<meta property="og:description" content="outbreakinfo">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VK9KSJ8ENE"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VK9KSJ8ENE');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">outbreakinfo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/outbreakinfo.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/epivignette.html">Cases &amp; Deaths data</a>
    </li>
    <li>
      <a href="../articles/locationtracker.html">Location Tracker</a>
    </li>
    <li>
      <a href="../articles/researchlibrary.html">Research Library</a>
    </li>
    <li>
      <a href="../articles/varianttracker.html">Variant Tracker</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/outbreak-info/R-outbreak-info/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="outbreakinfo_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to outbreakinfo</h1>
            
            <h4 class="date">04 November 2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/outbreak-info/R-outbreak-info/blob/master/vignettes/outbreakinfo.Rmd"><code>vignettes/outbreakinfo.Rmd</code></a></small>
      <div class="hidden name"><code>outbreakinfo.Rmd</code></div>

    </div>

    
    
<p><a href="https://outbreak.info">outbreak.info</a> is a project to enable the tracking of SARS-CoV-2 Variants within the COVID-19 pandemic. This R package offers access to the data we have gathered and calculated to replicate the visualizations on outbreak.info. Here, we’ll outline some of the basic functionality of the R package to access the genomic (SARS-CoV-2 variant) data, research library, and epidemiology data (COVID-19 cases and deaths).</p>
<div id="sars-cov-2-variant-prevalence" class="section level2">
<h2 class="hasAnchor">
<a href="#sars-cov-2-variant-prevalence" class="anchor"></a>SARS-CoV-2 variant prevalence</h2>
<p>The core functionality within the suite of <a href="https://outbreak-info.github.io/R-outbreak-info/reference/index.html#section-sars-cov-variant-prevalence">Variant Prevalence Functions</a> include accessing data for:</p>
<ul>
<li><a href="#prevalence-over-time">Variant prevalence over time</a></li>
<li><a href="#cumulative-variant-prevalence">Cumulative variant prevalence</a></li>
<li><a href="#muations-within-a-variant">Calculating mutation prevalence within a variant</a></li>
</ul>
<div id="getting-started" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h3>
<p>Before we start, we need to provide our GISAID credentials to access the genomic data. If you don’t have a GISAID account, you can <a href="https://www.gisaid.org/registration/register/">register</a> for one on their website. It may take a day or two for the account to become active.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Install the package, if you haven't already, using devtools</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"outbreak-info/R-outbreak-info"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Package imports</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://outbreak-info.github.io/R-outbreak-info/">outbreakinfo</a></span><span class="op">)</span>
<span class="co">#&gt; Warning: replacing previous import 'jsonlite::flatten' by 'purrr::flatten' when</span>
<span class="co">#&gt; loading 'outbreakinfo'</span>

<span class="co"># Not needed; just used to tidy / visualize some of the outputs</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Authenticate yourself using your GISAID credentials.</span>
<span class="fu"><a href="../reference/authenticateUser.html">authenticateUser</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<hr>
</div>
<div id="prevalence-over-time" class="section level3">
<h3 class="hasAnchor">
<a href="#prevalence-over-time" class="anchor"></a>Prevalence over time</h3>
<p>Tracking how the prevalence of variants change over time is vital to understanding the evolution of SARS-CoV-2. We can calculate this prevalence for any lineage, mutation, combination of mutations, or lineage with added mutations. We’ll access the data and then plot the results.</p>
<div id="lineage-over-time-b-1-1-7" class="section level4">
<h4 class="hasAnchor">
<a href="#lineage-over-time-b-1-1-7" class="anchor"></a>Lineage over time: B.1.1.7</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Function to grab all the data for the prevalence of B.1.1.7 in Texas</span>
<span class="va">b117_tx</span> <span class="op">=</span> <span class="fu"><a href="../reference/getPrevalence.html">getPrevalence</a></span><span class="op">(</span>pangolin_lineage <span class="op">=</span> <span class="st">"B.1.1.7"</span>, location<span class="op">=</span><span class="st">"Texas"</span><span class="op">)</span>
<span class="co">#&gt; Retrieving data...</span>

<span class="co"># Accessing just the first row:</span>
<span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">b117_tx</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;                       1             </span>
<span class="co">#&gt; date                  "2020-07-21"  </span>
<span class="co">#&gt; total_count           "439"         </span>
<span class="co">#&gt; lineage_count         "1"           </span>
<span class="co">#&gt; total_count_rolling   "322.4286"    </span>
<span class="co">#&gt; lineage_count_rolling "0.1428571"   </span>
<span class="co">#&gt; proportion            "0.000443066" </span>
<span class="co">#&gt; proportion_ci_lower   "1.523767e-06"</span>
<span class="co">#&gt; proportion_ci_upper   "0.007764705" </span>
<span class="co">#&gt; lineage               "B.1.1.7"     </span>
<span class="co">#&gt; location              "Texas"</span>

<span class="co"># Plotting it:</span>
<span class="fu"><a href="../reference/plotPrevalenceOverTime.html">plotPrevalenceOverTime</a></span><span class="op">(</span><span class="va">b117_tx</span>, title <span class="op">=</span> <span class="st">"B.1.1.7 prevalence in Texas"</span><span class="op">)</span></code></pre></div>
<p><img src="outbreakinfo_files/figure-html/prev-time-1.png" width="700"> Variables are described in the <a href="https://outbreak-info.github.io/R-outbreak-info/reference/genomicsDataDictionary.html">Genomics Data Dictionary</a>.</p>
</div>
<div id="customizing-variant-inputs" class="section level4">
<h4 class="hasAnchor">
<a href="#customizing-variant-inputs" class="anchor"></a>Customizing variant inputs</h4>
<p>In addition to viewing the change in prevalence of a lineage over time, more complex variants can be queried. This includes <strong>combinations of lineages</strong>, like the <a href="https://outbreak.info/situation-reports/delta">Delta variant</a>, <strong>lineages with additional mutation(s)</strong>, like <a href="https://outbreak.info/situation-reports?muts=S%3AE484K&amp;pango=B.1.1.7">B.1.1.7 with S:E484K</a>, <strong>individual mutations</strong>, like <a href="https://outbreak.info/situation-reports?muts=S%3AE484K">S:E484K</a>, or <strong>groups of mutations</strong>, like <a href="https://outbreak.info/situation-reports?muts=S%3AE484K&amp;muts=S%3AP681R">S:E484K and S:P681R</a>. View the <a href="varianttracker.html">Variant Tracker</a> and <a href="locationtracker.html">Location Tracker</a> vignettes for more advanced examples.</p>
<hr>
</div>
</div>
<div id="cumulative-variant-prevalence-geographically" class="section level3">
<h3 class="hasAnchor">
<a href="#cumulative-variant-prevalence-geographically" class="anchor"></a>Cumulative variant prevalence geographically</h3>
<p>To get the prevalence of a particular variant to compare between locations, you can access the data through the <code>getCumulativeBySubadmin</code> function. Note that there are options to supply a location, like <code>"United States"</code> to view the prevalence broken down by U.S. state, and/or over the past <code>n</code> days. See the <a href="varianttracker.html">Variant Tracker Vignette</a> for more details.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Calculate cumulative prevalence of B.1.1.7 by country</span>
<span class="va">b117_world</span> <span class="op">=</span> <span class="fu"><a href="../reference/getCumulativeBySubadmin.html">getCumulativeBySubadmin</a></span><span class="op">(</span>pangolin_lineage <span class="op">=</span> <span class="st">"B.1.1.7"</span><span class="op">)</span>
<span class="co">#&gt; Retrieving data...</span>

<span class="co"># filtering down the data to view a few countries</span>
<span class="va">b117_world</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Canada"</span>, <span class="st">"United Kingdom"</span>, <span class="st">"Australia"</span>, <span class="st">"New Zealand"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">proportion</span>, <span class="va">proportion_ci_lower</span>, <span class="va">proportion_ci_upper</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span><span class="op">(</span><span class="va">proportion</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">name</th>
<th align="right">proportion</th>
<th align="right">proportion_ci_lower</th>
<th align="right">proportion_ci_upper</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">United Kingdom</td>
<td align="right">0.2401585</td>
<td align="right">0.2393550</td>
<td align="right">0.2409634</td>
</tr>
<tr class="even">
<td align="left">Canada</td>
<td align="right">0.2235216</td>
<td align="right">0.2215404</td>
<td align="right">0.2255123</td>
</tr>
<tr class="odd">
<td align="left">New Zealand</td>
<td align="right">0.0567376</td>
<td align="right">0.0484520</td>
<td align="right">0.0659801</td>
</tr>
<tr class="even">
<td align="left">Australia</td>
<td align="right">0.0151202</td>
<td align="right">0.0139252</td>
<td align="right">0.0163895</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div id="mutations-within-a-lineage" class="section level3">
<h3 class="hasAnchor">
<a href="#mutations-within-a-lineage" class="anchor"></a>Mutations within a lineage</h3>
<p>When we say a lineage, like B.1.1.7, what does that actually mean? The <code>getMutationsByLineage</code> function allows you to pull the prevalence of all the mutations within all the sequences assigned to B.1.1.7 or other lineages, and <code>plotMutationHeatmap</code> allows you to compare their prevalence in a heatmap:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">char_muts</span> <span class="op">=</span> <span class="fu"><a href="../reference/getMutationsByLineage.html">getMutationsByLineage</a></span><span class="op">(</span>pangolin_lineage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"B.1.1.7"</span>, <span class="st">"B.1.351"</span>, <span class="st">"B.1.617.2"</span>, <span class="st">"P.1"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; Retrieving data... </span>
<span class="co">#&gt; Retrieving data... </span>
<span class="co">#&gt; Retrieving data... </span>
<span class="co">#&gt; Retrieving data...</span>
<span class="fu"><a href="../reference/plotMutationHeatmap.html">plotMutationHeatmap</a></span><span class="op">(</span><span class="va">char_muts</span>, title <span class="op">=</span> <span class="st">"Mutations with at least 75% prevalence in Variants of Concern"</span>, lightBorders <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p><img src="outbreakinfo_files/figure-html/characteristic_mutations-1.png" width="700"></p>
<hr>
</div>
<div id="additional-genomic-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-genomic-functions" class="anchor"></a>Additional genomic functions</h3>
<p>All the <a href="https://outbreak-info.github.io/R-outbreak-info/reference/index.html#section-sars-cov-variant-prevalence">Variant Prevalence Functions</a> provide documentation on their functionality and examples.</p>
</div>
<div id="accessing-research-library-metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#accessing-research-library-metadata" class="anchor"></a>Accessing Research Library metadata</h3>
<p>All COVID-19 research metadata can be accessed through the main function <code>getResourcesData</code> which searches across a series of <a href="https://outbreak.info/sources#resources">COVID-19 resources</a> of various types. For instance, you can find all research on seroprevalence, including publications, clinical trials, datasets, and more:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get the resources metadata</span>
<span class="co"># Use `fetchAll = TRUE` to get all the results, not just the first 10</span>
<span class="co"># Use  double quotes around "sero-prevalence" to look for that exact phrase. Without quotes, the query will search for "sero" or "prevalence", not their combination.</span>
<span class="co"># Combine terms using OR or AND (capitalization is required!)</span>
<span class="va">seroprevalence</span> <span class="op">=</span> <span class="fu"><a href="../reference/getResourcesData.html">getResourcesData</a></span><span class="op">(</span>query <span class="op">=</span> <span class="st">'seroprevalence OR "sero-prevalence"'</span>, fetchAll <span class="op">=</span> <span class="cn">TRUE</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"description"</span>, <span class="st">"@type"</span>, <span class="st">"date"</span>, <span class="st">"curatedBy"</span>, <span class="st">"journalName"</span>, <span class="st">"funding"</span>, <span class="st">"url"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Accessing just the first row:</span>
<span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">seroprevalence</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;             [,1]                                                                                      </span>
<span class="co">#&gt; @type       "ClinicalTrial"                                                                           </span>
<span class="co">#&gt; _id         "CTRI/2020/09/028040"                                                                     </span>
<span class="co">#&gt; curatedBy   list,6                                                                                    </span>
<span class="co">#&gt; date        18654                                                                                     </span>
<span class="co">#&gt; description "NA"                                                                                      </span>
<span class="co">#&gt; funding     data.frame,1                                                                              </span>
<span class="co">#&gt; name        "Sero-prevalence and Clinical profile of SARS-CoV-2 infection in children - Covid 19 kids"</span>
<span class="co">#&gt; url         "http://www.ctri.nic.in/Clinicaltrials/pmaindet2.php?trialid=47809"                       </span>
<span class="co">#&gt; journalName "NA"</span>

<span class="co"># Plot the increase in seroprevalence research over time</span>
<span class="co"># roll up the number of resources by week</span>
<span class="va">resources_by_date</span> <span class="op">=</span> <span class="va">seroprevalence</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>,
         iso_week <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/week.html">isoweek</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span>

<span class="co"># count the number of new resources per week.</span>
<span class="va">resources_per_week</span> <span class="op">=</span> <span class="va">resources_by_date</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">`@type`</span>, <span class="va">iso_week</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span>
  <span class="co"># convert from iso week back to a date</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>iso_date <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/parse_date_time.html">parse_date_time</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="va">year</span>,<span class="va">iso_week</span>, <span class="st">"Mon"</span>, sep<span class="op">=</span><span class="st">"-"</span><span class="op">)</span>, <span class="st">"Y-W-a"</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">resources_per_week</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">iso_date</span>, y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#66c2a5"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html">scale_x_datetime</a></span><span class="op">(</span>date_labels <span class="op">=</span> <span class="st">"%b %Y"</span>, name <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Seroprevalence research by week"</span>, subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Number of resources in outbreak.info's Research Library as of "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"%d %B %Y"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="outbreakinfo_files/figure-html/research-1.png" width="700"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">

<span class="co"># Visualize the breakdown of seroprevalence research</span>
<span class="va">resources_by_type</span> <span class="op">=</span>  <span class="va">seroprevalence</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">`@type`</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span>

<span class="co"># order the levels in the bar chart</span>
<span class="va">resources_by_type</span><span class="op">$</span><span class="va">`@type`</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">resources_by_type</span><span class="op">$</span><span class="va">`@type`</span>, <span class="va">resources_by_type</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span><span class="op">(</span><span class="va">`@type`</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">resources_by_type</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">`@type`</span>, y <span class="op">=</span> <span class="va">n</span>, fill<span class="op">=</span><span class="va">`@type`</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>Publication <span class="op">=</span> <span class="st">"#e15759"</span>, ClinicalTrial <span class="op">=</span> <span class="st">"#b475a3"</span>, Dataset <span class="op">=</span> <span class="st">"#126b93"</span>, Protocol <span class="op">=</span> <span class="st">"#59a14f"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"Seroprevalence research by type of resource"</span>, subtitle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Number of resources in outbreak.info's Research Library as of "</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html">format</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"%d %B %Y"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>, legend.position <span class="op">=</span> <span class="st">"none"</span>, panel.grid.major.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>, panel.grid.minor.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><img src="outbreakinfo_files/figure-html/research-2.png" width="700"></p>
</div>
<div id="customizing-research-library-queries" class="section level3">
<h3 class="hasAnchor">
<a href="#customizing-research-library-queries" class="anchor"></a>Customizing Research Library queries</h3>
<p>View the <a href="researchlibrary.html">Research Library vignette</a> for more details on how to access these data and <a href="https://discovery.biothings.io/view/outbreak">Research Library schemas</a> for information on the variables contained within the metadata.</p>
</div>
<div id="additional-research-library-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-research-library-functions" class="anchor"></a>Additional Research Library functions</h3>
<p>All the <a href="https://outbreak-info.github.io/R-outbreak-info/reference/index.html#section-research-library">Research Library Functions</a> provide documentation on their functionality and examples.</p>
<hr>
</div>
</div>
<div id="cases-deaths-data" class="section level2">
<h2 class="hasAnchor">
<a href="#cases-deaths-data" class="anchor"></a>Cases &amp; deaths data</h2>
<p>Epidemiology data in outbreak.info includes daily cases and death data for World Bank Regions, individual countries, states/provinces, U.S. Metropolitan areas, and U.S. counties. These functions do not require a GISAID account or calling <code><a href="../reference/authenticateUser.html">authenticateUser()</a></code> before use.</p>
<hr>
<div id="accessing-cases-deaths-data" class="section level3">
<h3 class="hasAnchor">
<a href="#accessing-cases-deaths-data" class="anchor"></a>Accessing Cases &amp; Deaths data</h3>
<p>All cases and death data can be accessed through the main function <code>getEpiData</code> and plotted with <code>plotEpiData</code>. For instance, you can compare the cases per capita in a few major metropolitan areas:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Get the epi data</span>
<span class="va">epi_metro</span> <span class="op">=</span> <span class="fu"><a href="../reference/getEpiData.html">getEpiData</a></span><span class="op">(</span>name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Detroit-Warren-Dearborn, MI"</span>, <span class="st">"New Orleans-Metairie, LA"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Accessing just the first row:</span>
<span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">epi_metro</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span><span class="op">)</span>
<span class="co">#&gt;                                                   577                       </span>
<span class="co">#&gt; X_id                                              "METRO_35380_2020-03-09"  </span>
<span class="co">#&gt; X_score                                           8.449208                  </span>
<span class="co">#&gt; admin_level                                       1.5                       </span>
<span class="co">#&gt; cbsa                                              "35380"                   </span>
<span class="co">#&gt; confirmed                                         1                         </span>
<span class="co">#&gt; confirmed_doublingRate                            NA                        </span>
<span class="co">#&gt; confirmed_firstDate                               "2020-03-09"              </span>
<span class="co">#&gt; confirmed_newToday                                TRUE                      </span>
<span class="co">#&gt; confirmed_numIncrease                             1                         </span>
<span class="co">#&gt; confirmed_numIncrease_per_100k                    0.07870731                </span>
<span class="co">#&gt; confirmed_pctIncrease                             NA                        </span>
<span class="co">#&gt; confirmed_per_100k                                0.07870731                </span>
<span class="co">#&gt; confirmed_per_100k_breaks                         numeric,10                </span>
<span class="co">#&gt; confirmed_rolling                                 3.25                      </span>
<span class="co">#&gt; confirmed_rolling_14days_ago                      NA                        </span>
<span class="co">#&gt; confirmed_rolling_14days_ago_diff                 NA                        </span>
<span class="co">#&gt; confirmed_rolling_14days_ago_diff_breaks          numeric,10                </span>
<span class="co">#&gt; confirmed_rolling_14days_ago_diff_per_100k        NA                        </span>
<span class="co">#&gt; confirmed_rolling_14days_ago_diff_per_100k_breaks numeric,10                </span>
<span class="co">#&gt; confirmed_rolling_14days_ago_per_100k             NA                        </span>
<span class="co">#&gt; confirmed_rolling_breaks                          numeric,10                </span>
<span class="co">#&gt; confirmed_rolling_per_100k                        0.2557988                 </span>
<span class="co">#&gt; confirmed_rolling_per_100k_breaks                 numeric,10                </span>
<span class="co">#&gt; country_iso3                                      "USA"                     </span>
<span class="co">#&gt; country_name                                      "United States of America"</span>
<span class="co">#&gt; date                                              18330                     </span>
<span class="co">#&gt; daysSince100Cases                                 NA                        </span>
<span class="co">#&gt; daysSince10Deaths                                 NA                        </span>
<span class="co">#&gt; daysSince50Deaths                                 NA                        </span>
<span class="co">#&gt; dead                                              0                         </span>
<span class="co">#&gt; dead_doublingRate                                 NA                        </span>
<span class="co">#&gt; dead_firstDate                                    "2020-03-14"              </span>
<span class="co">#&gt; dead_newToday                                     TRUE                      </span>
<span class="co">#&gt; dead_numIncrease                                  0                         </span>
<span class="co">#&gt; dead_numIncrease_per_100k                         0                         </span>
<span class="co">#&gt; dead_pctIncrease                                  NA                        </span>
<span class="co">#&gt; dead_per_100k                                     0                         </span>
<span class="co">#&gt; dead_per_100k_breaks                              numeric,10                </span>
<span class="co">#&gt; dead_rolling                                      0                         </span>
<span class="co">#&gt; dead_rolling_14days_ago                           NA                        </span>
<span class="co">#&gt; dead_rolling_14days_ago_diff                      NA                        </span>
<span class="co">#&gt; dead_rolling_14days_ago_diff_breaks               numeric,10                </span>
<span class="co">#&gt; dead_rolling_14days_ago_diff_per_100k             NA                        </span>
<span class="co">#&gt; dead_rolling_14days_ago_diff_per_100k_breaks      numeric,10                </span>
<span class="co">#&gt; dead_rolling_14days_ago_per_100k                  NA                        </span>
<span class="co">#&gt; dead_rolling_breaks                               numeric,10                </span>
<span class="co">#&gt; dead_rolling_per_100k                             0                         </span>
<span class="co">#&gt; dead_rolling_per_100k_breaks                      numeric,10                </span>
<span class="co">#&gt; first_dead.first_confirmed                        5                         </span>
<span class="co">#&gt; lat                                               29.92697                  </span>
<span class="co">#&gt; location_id                                       "METRO_35380"             </span>
<span class="co">#&gt; long                                              -89.96759                 </span>
<span class="co">#&gt; mostRecent                                        FALSE                     </span>
<span class="co">#&gt; name                                              "New Orleans-Metairie, LA"</span>
<span class="co">#&gt; population                                        1270530                   </span>
<span class="co">#&gt; recovered                                         0                         </span>
<span class="co">#&gt; recovered_firstDate                               ""                        </span>
<span class="co">#&gt; recovered_newToday                                FALSE                     </span>
<span class="co">#&gt; recovered_numIncrease                             0                         </span>
<span class="co">#&gt; recovered_numIncrease_per_100k                    0                         </span>
<span class="co">#&gt; recovered_per_100k                                0                         </span>
<span class="co">#&gt; recovered_rolling                                 0                         </span>
<span class="co">#&gt; recovered_rolling_14days_ago                      NA                        </span>
<span class="co">#&gt; recovered_rolling_14days_ago_diff                 NA                        </span>
<span class="co">#&gt; recovered_rolling_14days_ago_diff_per_100k        NA                        </span>
<span class="co">#&gt; recovered_rolling_14days_ago_per_100k             NA                        </span>
<span class="co">#&gt; recovered_rolling_per_100k                        0                         </span>
<span class="co">#&gt; sub_parts                                         data.frame,3              </span>
<span class="co">#&gt; wb_region                                         "North America"           </span>
<span class="co">#&gt; geometry.coordinates                              numeric,54                </span>
<span class="co">#&gt; geometry.type                                     "Polygon"</span>

<span class="co"># Get the epi data and plot it.</span>
<span class="fu"><a href="../reference/plotEpiData.html">plotEpiData</a></span><span class="op">(</span>locations <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Detroit-Warren-Dearborn, MI"</span>, <span class="st">"New Orleans-Metairie, LA"</span><span class="op">)</span>, variable <span class="op">=</span> <span class="st">"confirmed_rolling_per_100k"</span><span class="op">)</span></code></pre></div>
<p><img src="outbreakinfo_files/figure-html/epi-1.png" width="700"></p>
<p>Variables are described in the <a href="https://outbreak-info.github.io/R-outbreak-info/reference/epidemiologyDataDictionary.html">Epidemiology Data Dictionary</a>.</p>
<hr>
</div>
<div id="customizing-epidemiology-features" class="section level3">
<h3 class="hasAnchor">
<a href="#customizing-epidemiology-features" class="anchor"></a>Customizing epidemiology features</h3>
<p>View the <a href="epivignette.html">Epidemiology vignette</a> for more details on how to access these data and <a href="https://outbreak-info.github.io/R-outbreak-info/reference/epidemiologyDataDictionary.html">Epidemiology Data Dictionary</a> for information on the variables contained within the data.</p>
</div>
<div id="additional-epidemiology-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#additional-epidemiology-functions" class="anchor"></a>Additional epidemiology functions</h3>
<p>All the <a href="https://outbreak-info.github.io/R-outbreak-info/reference/index.html#section-cases-deaths">Cases &amp; Deaths Functions</a> provide documentation on their functionality and examples.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Manar Alkuzweny, Karthik Gangavarapu, Laura Hughes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
